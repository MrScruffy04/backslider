/*!
 * jQuery Plugin: Backslider
 * Author: @justindantzer
 * Licensed under the MIT license
 */
(function(e){e.Slider=function(t,n){var r=this,i=e(t),s=i.find("> :not(nav)"),o={},u=0,a=undefined,f=e("body").outerWidth(),l=null,c=e.extend({id:"",showpause:1,pauseimage:"",separator:"",navtext:"",interval:1e4,action:"click",equalheight:0},n||{});this.init=function(){if(""!=c.id)i.attr("id",c.id);s.eq(0).addClass("current");this.controls();o=i.find("> nav");o.find("> ol > li:not(.separator):first").addClass("sel");if(1==c.equalheight)this.equalheight();o.find(".pause").on("click",this.pause);o.find("> ol > li:not(.separator)").on(c.action,this.set);e(window).resize(this.windowresize);i.addClass("slider-enabled");a=setInterval(this.advance,c.interval)};this.equalheight=function(t){var n=t||Math.max.apply(null,s.map(function(){return e(this).innerHeight()}).get());i.height(n)};this.controls=function(){var t=e("<nav></nav>").appendTo(i);if(1==c.showpause){if(""!=c.pauseimage){e("<img />").attr({"class":"pause",src:c.pauseimage,alt:"Pause"}).appendTo(t)}else{e("<span></span>").attr({"class":"pause"}).text("Pause").appendTo(t)}}var n=e("<ol></ol>").appendTo(t);e.each(s,function(t){if(""!=c.separator&&0!=t){e("<li></li>").attr({"class":"separator"}).text(c.separator).appendTo(n)}var r=t+1;if(""!=c.navtext&&undefined!=s.eq(t).attr(c.navtext))r=s.eq(t).attr(c.navtext);e("<li></li>").text(r).appendTo(n)})};this.advance=function(e){var t=i.find(".current"),n=typeof e!="undefined"?e:t.index()==s.length-1?0:s.index(t)+1;t.removeClass("current");s.eq(n).addClass("current");o.find(".sel").removeClass("sel");o.find("ol > li:not(.separator)").eq(n).addClass("sel")};this.set=function(e){e.preventDefault();clearInterval(a);var t=o.find("ol > li:not(.separator)").index(e.target);r.advance(t);if(1==u){r.pause()}else{a=setInterval(r.advance,c.interval)}};this.pause=function(){if(0==u){clearInterval(a);u=1;o.find(".pause").addClass("play")}else{a=setInterval(r.advance,c.interval);u=0;o.find(".pause").removeClass("play")}};this.windowresize=function(){f=e("body").outerWidth();if(1==c.equalheight){clearTimeout(l);l=setTimeout(r.equalheight,150)}};this.init(i,n)};e.fn.slider=function(t){if(this.length){return this.each(function(){new e.Slider(this,t)})}}})(jQuery);