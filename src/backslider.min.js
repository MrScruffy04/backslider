/*!
 * jQuery Plugin: Backslider
 * Author: @justindantzer
 * Licensed under the MIT license
 */
(function(e){e.Backslider=function(t,n){function i(){var t=e("<nav></nav>").appendTo(r.el);if(r.opts.allowpause){if(""!=r.opts.pauseimage){e("<img />").attr({"class":"pause",src:r.opts.pauseimage,alt:"Pause"}).appendTo(t)}else{e("<span></span>").attr({"class":"pause"}).text("Pause").appendTo(t)}}var n=e("<ol></ol>").appendTo(t);e.each(r.slides,function(t){if(""!=r.opts.separator&&0!=t){e("<li></li>").attr({"class":"separator"}).text(r.opts.separator).appendTo(n)}var i=t+1;if(""!=r.opts.navtext&&undefined!=r.slides.eq(t).attr(r.opts.navtext))i=r.slides.eq(t).attr(r.opts.navtext);e("<li></li>").addClass(0==t?"sel":"").text(i).appendTo(n)});if(r.opts.allowpause)r.el.find(".pause").on("click",r.stop);r.el.find("nav > ol > li:not(.separator)").on(r.opts.action,function(){var t=e(this);r.stop().advance(t.parent().children(":not(.separator)").index(t))})}var r=this;r.opts={action:"click",allowpause:false,controls:true,equalheight:false,interval:1e4,navtext:"",pauseimage:"",separator:""};r.init=function(n){r.opts=e.extend(r.opts,n||{});r.el=e(t);r.slides=r.el.find("> :not(nav)");r.index=0;r.slides.eq(0).addClass("current");i();if(1==r.opts.equalheight)r.equalheight();e(window).resize(r.windowresize);r.el.addClass("backslider-enabled");if(r.opts.interval>0)r.start()};r.equalheight=function(t){var n=t||Math.max.apply(null,r.slides.map(function(){return e(this).innerHeight()}).get());r.el.height(n)};r.advance=function(e){if(typeof e==undefined)return;r.index=e>r.slides.length+1?0:e;var t=r.slides.eq(r.index);r.el.find("nav ol > li:not(.separator)").eq(e).addClass("sel").siblings().removeClass("sel");t.addClass("current").siblings().removeClass("current")};r.start=function(){r.timer=setInterval(function(){r.advance(r.index+1)},r.opts.interval);r.el.find(".play").removeClass("play")};r.stop=function(){r.timer=clearInterval(r.timer);r.el.find(".pause").addClass("play");return r};r.windowresize=function(){if(1==r.opts.equalheight){r.resizetimer=clearTimeout(r.resizetimer);r.resizetimer=setTimeout(r.equalheight,50)}};r.init(n);};e.fn.backslider=function(t){return this.each(function(){new e.Backslider(this,t)})}})(jQuery);